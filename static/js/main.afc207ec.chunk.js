(this.webpackJsonpboilerplate=this.webpackJsonpboilerplate||[]).push([[0],{222:function(e,t,n){e.exports=n.p+"static/media/login.63c6450d.jpg"},224:function(e,t,n){e.exports=n.p+"static/media/404.a41a6c81.jpg"},227:function(e,t,n){e.exports=n(442)},232:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},247:function(e,t,n){},442:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(134),i=n.n(o),l=(n(232),n(38)),c=n.n(l),s=n(36),u=n(22),d=n(23),m=n(26),p=n(24),h=n(27),f=n(135),b=n(28),g=n(25),v="SET_CURRENT_USER",E=n(48),j=n.n(E);n(238),n(241),n(443);j.a.initializeApp({apiKey:"AIzaSyB9Zz2B5UfT5zF5WvPT2KVjvzC2NmJHWEs",authDomain:"kiyje-7f725.firebaseapp.com",databaseURL:"https://kiyje-7f725.firebaseio.com",projectId:"kiyje-7f725",storageBucket:"kiyje-7f725.appspot.com",messagingSenderId:"277714092542",appId:"1:277714092542:web:937e6948637638b7d080af",measurementId:"G-KEYBWRRJW3"});var O=function(e,t){var n,a,r,o;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return n=w.doc("users/".concat(e.uid)),t.next=5,c.a.awrap(n.get());case 5:if(t.sent.exists){t.next=17;break}return a=e.displayName,r=e.email,o=new Date,t.prev=9,t.next=12,c.a.awrap(n.set({displayName:a,email:r,createdAt:o,adminStatus:!1}));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(9),console.log("error creating user",t.t0.message);case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}}),null,null,[[9,14]])},y=j.a.auth(),w=j.a.firestore(),C=new j.a.auth.GoogleAuthProvider;C.setCustomParameters({promt:"selected_account"});var k=function(){return y.signInWithPopup(C)},N=j.a,S=(n(243),n(220)),A=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={lat:"80",lon:"",alt:"",head:"",speed:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"timer",value:function(){var e=new Date;this.setState({lat:this.props.coords.latitude,lon:this.props.coords.longitude,alt:this.props.coords.altitude,head:this.props.coords.heading,speed:this.props.coords.speed}),N.firestore().collection("location").doc("GcnDSBuUoO0s1WIG0EjL").update({lat:this.state.lat,lon:this.state.lon,createdAt:e})}},{key:"componentDidMount",value:function(){this.intervalId=setInterval(this.timer.bind(this),1e4)}},{key:"render",value:function(){return this.props.isGeolocationAvailable?this.props.isGeolocationEnabled?this.props.coords?r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"latitude"),r.a.createElement("td",null,this.props.coords.latitude)),r.a.createElement("tr",null,r.a.createElement("td",null,"longitude"),r.a.createElement("td",null,this.props.coords.longitude)),r.a.createElement("tr",null,r.a.createElement("td",null,"altitude"),r.a.createElement("td",null,this.props.coords.altitude)),r.a.createElement("tr",null,r.a.createElement("td",null,"heading"),r.a.createElement("td",null,this.props.coords.heading)),r.a.createElement("tr",null,r.a.createElement("td",null,"speed"),r.a.createElement("td",null,this.props.coords.speed)))):r.a.createElement("div",null,"Getting the location data\u2026 "):r.a.createElement("div",null,"Geolocation is not enabled"):r.a.createElement("div",null,"Your browser does not support Geolocation")}}]),t}(r.a.Component),I=Object(S.geolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3})(A),x=n(89),R=n(221),U=(n(244),function(e){var t=e.handleChange,n=e.label,a=Object(R.a)(e,["handleChange","label"]);return r.a.createElement("div",{className:"group"},r.a.createElement("input",Object.assign({className:"form-input",onChange:t},a)),n?r.a.createElement("label",{className:"".concat(a.value.length?"shrink":""," form-input-label")},n):null)}),F=n(222),G=n.n(F),W=(n(245),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.value,r=t.name;n.setState(Object(x.a)({},r,a))},n.handleSubmit=function(e){e.preventDefault(),n.props.signIn(n.state)},n.state={name:"",password:""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(b.a,{to:"/home"}):r.a.createElement("div",{className:"login-form-container"},r.a.createElement("div",{className:"left"},r.a.createElement("img",{src:G.a,alt:"login"}),r.a.createElement("h1",null,"Login For More Functionality . . . .")),r.a.createElement("div",{className:"login-content"},r.a.createElement("h1",null,"LOGIN"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement(U,{name:"name",type:"text",handleChange:this.handleChange,value:this.state.name,label:"Enter your id",required:!0}),r.a.createElement(U,{name:"password",type:"password",handleChange:this.handleChange,value:this.state.password,label:"Enter your password",required:!0})),r.a.createElement("div",{className:"submit-button"},r.a.createElement("button",{type:"submit"},"LOGIN"))),r.a.createElement("div",null,r.a.createElement("button",{className:"google-login",onClick:k},"Google SignIn ",r.a.createElement("i",{className:"fab fa-google"}))),r.a.createElement("div",{className:"login-alert"},t?r.a.createElement("p",null,t):null)))}}]),t}(r.a.Component)),L=(Object(g.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((n=t,function(e,t,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(n.email,n.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var n}}}))(W),n(224)),P=n.n(L),D=(n(247),function(){return r.a.createElement("div",{className:"notfound"},r.a.createElement("div",{className:"top"},r.a.createElement("img",{src:P.a,alt:"page-error"})),r.a.createElement("div",{className:"bottom"},r.a.createElement("h1",null,"Page Not found")))}),T=n(225),_=n.n(T),B=n(18),z=n(37),q=function(){return r.a.createElement("div",{style:{transform:"scale(3)",color:"red"}},r.a.createElement("i",{className:"fas fa-map-pin"}))},J=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={lat:"",long:""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.location;return(r.a.createElement("div",{style:{height:"100vh",width:"100%"}},e&&e.map((function(e){var t=e.lon,n=e.lat;return r.a.createElement(_.a,{bootstrapURLKeys:{key:"AIzaSyCw1Cu5QmZqsFLWq-D7m12E3Qqjjj13xWY"},defaultZoom:17,defaultCenter:{lat:n,lng:t}},r.a.createElement(q,{lat:n,lng:t}))}))))}}]),t}(a.Component),K=(Object(B.d)(Object(g.b)((function(e){return{location:e.firestore.ordered.location}})),Object(z.firestoreConnect)([{collection:"location"}]))(J),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).unsubscribeFromAuth=null,n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.setCurrentUser;this.unsubscribeFromAuth=y.onAuthStateChanged((function(t){return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=7;break}return n.next=3,c.a.awrap(O(t));case 3:n.sent.onSnapshot((function(t){e(Object(s.a)({id:t.id},t.data()))})),n.next=8;break;case 7:e(t);case 8:case"end":return n.stop()}}))}))}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/",component:I}),r.a.createElement(b.b,{path:"*",exact:!0,component:D}))))}}]),t}(r.a.Component)),M=Object(g.b)(null,(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:v,payload:e}}(t))}}}))(K),Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var H=n(61),Q={authError:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(s.a)({},e,{authError:"Login Failed"});case"LOGIN_SUCCESS":return Object(s.a)({},e,{authError:null});case"SIGNOUT_SUCCESS":default:return e}},$={currentUser:null},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(s.a)({},e,{currentUser:t.payload});default:return e}},ee=Object(B.c)({auth:V,user:X,firestore:H.firestoreReducer,firebase:z.firebaseReducer}),te=n(226),ne=Object(B.e)(ee,Object(B.d)(Object(B.a)(te.a.withExtraArgument({getFirebase:z.getFirebase,getFirestore:H.getFirestore})),Object(H.reduxFirestore)(N),Object(z.reactReduxFirebase)(N,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));i.a.render(r.a.createElement(g.a,{store:ne},r.a.createElement(M,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Y?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Z(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Z(t,e)}))}}()}},[[227,1,2]]]);
//# sourceMappingURL=main.afc207ec.chunk.js.map